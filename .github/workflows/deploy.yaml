name: Deployment Pipeline
on: [workflow_dispatch]
jobs:
  DEV:
    runs-on: self-hosted
    steps:
      - run: |
          aws eks update-kubeconfig --name dev-eks
          argocd login argocd-dev.rdevopsb80.online --username admin --password $(kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 -d)

  QA:
    environment: QA
    runs-on: self-hosted
    needs:
      - DEV
    steps:
      - run: echo Hello

  UAT:
    environment: UAT
    runs-on: self-hosted
    needs:
      - QA
    steps:
      - run: echo Hello

  PROD:
    environment: PROD
    runs-on: self-hosted
    needs:
      - UAT
    steps:
      - run: echo Hello

